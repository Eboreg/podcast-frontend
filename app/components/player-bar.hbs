<div class="player-bar" ...attributes>
  {{#if this.isExpanded}}
    <PlayerBar::Expanded @episode={{@episode}} class="d-xl-none mx-half" />
  {{/if}}

  <div class="row align-center mr-half">
    <LinkTo
      @route={{@episode.route}}
      @models={{@episode.routeModels}}
      class="row gap-single align-center episode ellipsis oneliner"
    >
      {{#if @episode.image-thumbnail}}
        <img src={{@episode.image-thumbnail}} alt="" />
      {{else if @episode.hasNumber}}
        <div class="podcast-content-leading-icon bg-primary border-primary ml-half">{{@episode.number}}</div>
      {{else if @episode.podcast.cover-thumbnail}}
        <img src={{@episode.podcast.cover-thumbnail}} alt="" />
      {{else}}
        <span class="material-symbols podcast-content-leading-icon bg-primary border-primary ml-half">podcasts</span>
      {{/if}}
      <div class="ellipsis">
        <div class="bold ellipsis">{{@episode.name}}</div>
        <div class="small ellipsis">{{@episode.podcast.name}}</div>
      </div>
    </LinkTo>

    {{#if this.playerIsBusy}}
      <ProgressCircle />
    {{else if this.audio.isPlaying}}
      <span
        class="material-symbols button larger"
        role="button"
        {{on "click" this.audio.pause}}
        title="Pausa"
      >pause</span>
    {{else}}
      <span
        class="material-symbols button larger"
        role="button"
        {{on "click" this.audio.play}}
        title="Spela"
      >play_arrow</span>
    {{/if}}

    <PlayerBar::Expanded @episode={{@episode}} class="d-none d-xl-flex fill" />

    <div class="d-xl-none">
      {{#if this.isExpanded}}
        <span class="material-symbols button" role="button" {{on "click" this.collapse}}>keyboard_arrow_down</span>
      {{else}}
        <span class="material-symbols button" role="button" {{on "click" this.expand}}>keyboard_arrow_up</span>
      {{/if}}
    </div>
  </div>
</div>
